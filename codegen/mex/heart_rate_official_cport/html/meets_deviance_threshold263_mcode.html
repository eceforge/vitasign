<pre class="code">
<span class="srcline"><span class="lineno"><a href="1,570" id="srcline570">570</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,571" id="srcline571">571</a></span><span class="line"><span class="comment">% RETURNS TRUE IF THE INPUT SIGNAL VALUE MEETS THE DEVIANCE REQS. NOTE</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,572" id="srcline572">572</a></span><span class="line"><span class="comment">% THE THRESHOLD VALUE CHANGES BASED ON WHETHER DEVIANCE IS NEG OR POS</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,573" id="srcline573">573</a></span><span class="line"><span class="keyword">function</span> [<span class="var type1" id="S68T2U892">meets_deviance_req</span>] = meets_deviance_threshold(<span class="var type1" id="S69T4U895">hr_value</span>, <span class="var type1" id="S70T4U896">signal_level</span>, <span class="var type1" id="S71T4U897">pos_deviance_threshold</span>, <span class="var type1" id="S72T4U898">neg_deviance_threshold</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="1,574" id="srcline574">574</a></span><span class="line">        <span class="mxinfo" id="T5:U6"><span class="var type1" id="S73T5U901">Fixed_Point_Properties</span> = <span class="mxinfo" id="T5:U8">numerictype(<span class="string">'WordLength'</span>, 32, <span class="string">'FractionLength'</span>, 16, <span class="string">'Signed'</span>,false)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,575" id="srcline575">575</a></span><span class="line">        <span class="mxinfo" id="T7:U9"><span class="var type1" id="S76T7U913">F</span> = <span class="mxinfo" id="T7:U11">fimath(<span class="string">'OverflowMode'</span>,<span class="string">'saturate'</span>, <span class="string">'RoundMode'</span>, <span class="string">'nearest'</span>, <span class="string">'ProductFractionLength'</span>, 16,<span class="string">'ProductMode'</span>, <span class="string">'SpecifyPrecision'</span>, <span class="string">'MaxProductWordLength'</span>, 32, <span class="string">'SumFractionLength'</span>, 16, <span class="string">'SumMode'</span>, <span class="string">'SpecifyPrecision'</span>,<span class="string">'MaxSumWordLength'</span>, 32)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,576" id="srcline576">576</a></span><span class="line">        <span class="comment">% Asserts that the input parameters are of fixed point</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,577" id="srcline577">577</a></span><span class="line">        assert(isfi(<span class="var type1" id="S69T4U937">hr_value</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="1,578" id="srcline578">578</a></span><span class="line">        assert(isfi(<span class="var type1" id="S70T4U943">signal_level</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="1,579" id="srcline579">579</a></span><span class="line">        assert(isfi(<span class="var type1" id="S71T4U949">pos_deviance_threshold</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="1,580" id="srcline580">580</a></span><span class="line">        assert(isfi(<span class="var type1" id="S72T4U955">neg_deviance_threshold</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="1,581" id="srcline581">581</a></span><span class="line">        <span class="comment">% Asserts that input parameters are of specific fixed point parameters</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,582" id="srcline582">582</a></span><span class="line">        assert(<span class="mxinfo" id="T6:U16">isequal(numerictype(<span class="var type1" id="S69T4U964">hr_value</span>), <span class="var type1" id="S73T5U965">Fixed_Point_Properties</span>) &amp;&amp; isequal(fimath(<span class="var type1" id="S69T4U970">hr_value</span>), <span class="var type1" id="S76T7U971">F</span>)</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,583" id="srcline583">583</a></span><span class="line">        assert(<span class="mxinfo" id="T6:U21">isequal(numerictype(<span class="var type1" id="S70T4U980">signal_level</span>), <span class="var type1" id="S73T5U981">Fixed_Point_Properties</span>) &amp;&amp; isequal(fimath(<span class="var type1" id="S70T4U986">signal_level</span>), <span class="var type1" id="S76T7U987">F</span>)</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,584" id="srcline584">584</a></span><span class="line">        assert(<span class="mxinfo" id="T6:U26">isequal(numerictype(<span class="var type1" id="S71T4U996">pos_deviance_threshold</span>), <span class="var type1" id="S73T5U997">Fixed_Point_Properties</span>) &amp;&amp; isequal(fimath(<span class="var type1" id="S71T4U1002">pos_deviance_threshold</span>), <span class="var type1" id="S76T7U1003">F</span>)</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,585" id="srcline585">585</a></span><span class="line">        assert(<span class="mxinfo" id="T6:U31">isequal(numerictype(<span class="var type1" id="S72T4U1012">neg_deviance_threshold</span>), <span class="var type1" id="S73T5U1013">Fixed_Point_Properties</span>) &amp;&amp; isequal(fimath(<span class="var type1" id="S72T4U1018">neg_deviance_threshold</span>), <span class="var type1" id="S76T7U1019">F</span>)</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,586" id="srcline586">586</a></span><span class="line">    <span class="comment">%Accounts for the first signal value</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,587" id="srcline587">587</a></span><span class="line">    <span class="keyword">if</span> (<span class="mxinfo" id="T6:U36"><span class="var type1" id="S70T4U1024">signal_level</span> == 0</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="1,588" id="srcline588">588</a></span><span class="line">        <span class="mxinfo" id="T2:U38"><span class="var type1" id="S68T2U1028">meets_deviance_req</span> = <span class="mxinfo" id="T2:U40">1</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,589" id="srcline589">589</a></span><span class="line">        <span class="keyword">return</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,590" id="srcline590">590</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,591" id="srcline591">591</a></span><span class="line">    <span class="mxinfo" id="T54:U41"><span class="var type1" id="S81T54U1033">raw_deviance</span> = <span class="mxinfo" id="T54:U43">(<span class="mxinfo" id="T4:U44"><span class="var type1" id="S69T4U1037">hr_value</span> - <span class="var type1" id="S70T4U1038">signal_level</span></span>) / <span class="var type1" id="S70T4U1039">signal_level</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,592" id="srcline592">592</a></span><span class="line">    <span class="mxinfo" id="T54:U48"><span class="var type1" id="S82T54U1042">deviance</span> = <span class="mxinfo" id="T54:U50">abs(<span class="var type1" id="S81T54U1045">raw_deviance</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,593" id="srcline593">593</a></span><span class="line">    <span class="comment">% APPLIES CHECK </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,594" id="srcline594">594</a></span><span class="line">    <span class="keyword">if</span> (<span class="mxinfo" id="T6:U52"><span class="var type1" id="S81T54U1050">raw_deviance</span> &lt; 0</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="1,595" id="srcline595">595</a></span><span class="line">        <span class="keyword">if</span> (<span class="mxinfo" id="T6:U54"><span class="var type1" id="S82T54U1056">deviance</span> &lt; <span class="var type1" id="S72T4U1057">neg_deviance_threshold</span></span>)</span></span>
<span class="srcline"><span class="lineno"><a href="1,596" id="srcline596">596</a></span><span class="line">            <span class="mxinfo" id="T2:U57"><span class="var type1" id="S68T2U1060">meets_deviance_req</span> = <span class="mxinfo" id="T2:U59">1</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,597" id="srcline597">597</a></span><span class="line">        <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,598" id="srcline598">598</a></span><span class="line">            <span class="mxinfo" id="T2:U60"><span class="var type1" id="S68T2U1065">meets_deviance_req</span> = <span class="mxinfo" id="T2:U62">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,599" id="srcline599">599</a></span><span class="line">        <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,600" id="srcline600">600</a></span><span class="line">    <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,601" id="srcline601">601</a></span><span class="line">        <span class="keyword">if</span> (<span class="mxinfo" id="T6:U63"><span class="var type1" id="S82T54U1072">deviance</span> &lt; <span class="var type1" id="S71T4U1073">pos_deviance_threshold</span></span>)</span></span>
<span class="srcline"><span class="lineno"><a href="1,602" id="srcline602">602</a></span><span class="line">            <span class="mxinfo" id="T2:U66"><span class="var type1" id="S68T2U1076">meets_deviance_req</span> = <span class="mxinfo" id="T2:U68">1</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,603" id="srcline603">603</a></span><span class="line">        <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,604" id="srcline604">604</a></span><span class="line">            <span class="mxinfo" id="T2:U69"><span class="var type1" id="S68T2U1081">meets_deviance_req</span> = <span class="mxinfo" id="T2:U71">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,605" id="srcline605">605</a></span><span class="line">        <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,606" id="srcline606">606</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,607" id="srcline607">607</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,608" id="srcline608">608</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,609" id="srcline609">609</a></span><span class="line"><span class="comment">%DUAL THRESHOLD PROCESSSING</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,610" id="srcline610">610</a></span><span class="line"><span class="comment">% Filters out R_peaks which don't meet the threshold reqs</span></span></span>
</pre>
