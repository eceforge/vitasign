<pre class="code">
<span class="srcline"><span class="lineno"><a href="1,602" id="srcline602">602</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,603" id="srcline603">603</a></span><span class="line"><span class="comment">% RETURNS TRUE IF THE INPUT SIGNAL VALUE MEETS THE DEVIANCE REQS. NOTE</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,604" id="srcline604">604</a></span><span class="line"><span class="comment">% THE THRESHOLD VALUE CHANGES BASED ON WHETHER DEVIANCE IS NEG OR POS</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,605" id="srcline605">605</a></span><span class="line"><span class="keyword">function</span> [<span class="var type1" id="S70T2U946">meets_deviance_req</span>] = meets_deviance_threshold(<span class="var type1" id="S71T4U949">hr_value</span>, <span class="var type1" id="S72T4U950">signal_level</span>, <span class="var type1" id="S73T4U951">pos_deviance_threshold</span>, <span class="var type1" id="S74T4U952">neg_deviance_threshold</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="1,606" id="srcline606">606</a></span><span class="line">        <span class="mxinfo" id="T5:U6"><span class="var type1" id="S75T5U955">Fixed_Point_Properties</span> = <span class="mxinfo" id="T5:U8">numerictype(<span class="string">'WordLength'</span>, 32, <span class="string">'FractionLength'</span>, 16, <span class="string">'Signed'</span>,false)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,607" id="srcline607">607</a></span><span class="line">        <span class="mxinfo" id="T7:U9"><span class="var type1" id="S78T7U967">F</span> = <span class="mxinfo" id="T7:U11">fimath(<span class="string">'OverflowMode'</span>,<span class="string">'saturate'</span>, <span class="string">'RoundMode'</span>, <span class="string">'nearest'</span>, <span class="string">'ProductFractionLength'</span>, 16,<span class="string">'ProductMode'</span>, <span class="string">'SpecifyPrecision'</span>, <span class="string">'MaxProductWordLength'</span>, 32, <span class="string">'SumFractionLength'</span>, 16, <span class="string">'SumMode'</span>, <span class="string">'SpecifyPrecision'</span>,<span class="string">'MaxSumWordLength'</span>, 32)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,608" id="srcline608">608</a></span><span class="line">        <span class="comment">% asserts that the input parameters are of fixed point</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,609" id="srcline609">609</a></span><span class="line">        assert(isfi(<span class="var type1" id="S71T4U991">hr_value</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="1,610" id="srcline610">610</a></span><span class="line">        assert(isfi(<span class="var type1" id="S72T4U997">signal_level</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="1,611" id="srcline611">611</a></span><span class="line">        assert(isfi(<span class="var type1" id="S73T4U1003">pos_deviance_threshold</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="1,612" id="srcline612">612</a></span><span class="line">        assert(isfi(<span class="var type1" id="S74T4U1009">neg_deviance_threshold</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="1,613" id="srcline613">613</a></span><span class="line">        <span class="comment">% asserts that input parameters are of specific fixed point parameters</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,614" id="srcline614">614</a></span><span class="line">        assert(<span class="mxinfo" id="T6:U16">isequal(numerictype(<span class="var type1" id="S71T4U1018">hr_value</span>), <span class="var type1" id="S75T5U1019">Fixed_Point_Properties</span>) &amp;&amp; isequal(fimath(<span class="var type1" id="S71T4U1024">hr_value</span>), <span class="var type1" id="S78T7U1025">F</span>)</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,615" id="srcline615">615</a></span><span class="line">        assert(<span class="mxinfo" id="T6:U21">isequal(numerictype(<span class="var type1" id="S72T4U1034">signal_level</span>), <span class="var type1" id="S75T5U1035">Fixed_Point_Properties</span>) &amp;&amp; isequal(fimath(<span class="var type1" id="S72T4U1040">signal_level</span>), <span class="var type1" id="S78T7U1041">F</span>)</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,616" id="srcline616">616</a></span><span class="line">        assert(<span class="mxinfo" id="T6:U26">isequal(numerictype(<span class="var type1" id="S73T4U1050">pos_deviance_threshold</span>), <span class="var type1" id="S75T5U1051">Fixed_Point_Properties</span>) &amp;&amp; isequal(fimath(<span class="var type1" id="S73T4U1056">pos_deviance_threshold</span>), <span class="var type1" id="S78T7U1057">F</span>)</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,617" id="srcline617">617</a></span><span class="line">        assert(<span class="mxinfo" id="T6:U31">isequal(numerictype(<span class="var type1" id="S74T4U1066">neg_deviance_threshold</span>), <span class="var type1" id="S75T5U1067">Fixed_Point_Properties</span>) &amp;&amp; isequal(fimath(<span class="var type1" id="S74T4U1072">neg_deviance_threshold</span>), <span class="var type1" id="S78T7U1073">F</span>)</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,618" id="srcline618">618</a></span><span class="line">    <span class="comment">%Accounts for the first signal value</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,619" id="srcline619">619</a></span><span class="line">    <span class="keyword">if</span> (<span class="mxinfo" id="T6:U36"><span class="var type1" id="S72T4U1078">signal_level</span> == 0</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="1,620" id="srcline620">620</a></span><span class="line">        <span class="mxinfo" id="T2:U38"><span class="var type1" id="S70T2U1082">meets_deviance_req</span> = <span class="mxinfo" id="T2:U40">1</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,621" id="srcline621">621</a></span><span class="line">        <span class="keyword">return</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,622" id="srcline622">622</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,623" id="srcline623">623</a></span><span class="line">    <span class="mxinfo" id="T54:U41"><span class="var type1" id="S83T54U1087">raw_deviance</span> = <span class="mxinfo" id="T54:U43">(<span class="mxinfo" id="T4:U44"><span class="var type1" id="S71T4U1091">hr_value</span> - <span class="var type1" id="S72T4U1092">signal_level</span></span>) / <span class="var type1" id="S72T4U1093">signal_level</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,624" id="srcline624">624</a></span><span class="line">    <span class="mxinfo" id="T54:U48"><span class="var type1" id="S84T54U1096">deviance</span> = <span class="mxinfo" id="T54:U50">abs(<span class="var type1" id="S83T54U1099">raw_deviance</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,625" id="srcline625">625</a></span><span class="line">    <span class="comment">% APPLIES CHECK </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,626" id="srcline626">626</a></span><span class="line">    <span class="keyword">if</span> (<span class="mxinfo" id="T6:U52"><span class="var type1" id="S83T54U1104">raw_deviance</span> &lt; 0</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="1,627" id="srcline627">627</a></span><span class="line">        <span class="keyword">if</span> (<span class="var type1" id="S84T54U1110">deviance</span> &lt; <span class="var type1" id="S74T4U1111">neg_deviance_threshold</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="1,628" id="srcline628">628</a></span><span class="line">            <span class="var type1" id="S70T2U1114">meets_deviance_req</span> = 1;</span></span>
<span class="srcline"><span class="lineno"><a href="1,629" id="srcline629">629</a></span><span class="line">        <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,630" id="srcline630">630</a></span><span class="line">            <span class="var type1" id="S70T2U1119">meets_deviance_req</span> = 0;</span></span>
<span class="srcline"><span class="lineno"><a href="1,631" id="srcline631">631</a></span><span class="line">        <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,632" id="srcline632">632</a></span><span class="line">    <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,633" id="srcline633">633</a></span><span class="line">        <span class="keyword">if</span> (<span class="mxinfo" id="T6:U58"><span class="var type1" id="S84T54U1126">deviance</span> &lt; <span class="var type1" id="S73T4U1127">pos_deviance_threshold</span></span>)</span></span>
<span class="srcline"><span class="lineno"><a href="1,634" id="srcline634">634</a></span><span class="line">            <span class="mxinfo" id="T2:U61"><span class="var type1" id="S70T2U1130">meets_deviance_req</span> = <span class="mxinfo" id="T2:U63">1</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,635" id="srcline635">635</a></span><span class="line">        <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,636" id="srcline636">636</a></span><span class="line">            <span class="mxinfo" id="T2:U64"><span class="var type1" id="S70T2U1135">meets_deviance_req</span> = <span class="mxinfo" id="T2:U66">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,637" id="srcline637">637</a></span><span class="line">        <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,638" id="srcline638">638</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,639" id="srcline639">639</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,640" id="srcline640">640</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,641" id="srcline641">641</a></span><span class="line"><span class="comment">%DUAL THRESHOLD PROCESSSING</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,642" id="srcline642">642</a></span><span class="line"><span class="comment">% Filters out R_peaks which don't meet the threshold reqs</span></span></span>
</pre>
