<pre class="code">
<span class="srcline"><span class="lineno"><a href="1,645" id="srcline645">645</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,646" id="srcline646">646</a></span><span class="line"><span class="comment">% RETURNS TRUE IF THE INPUT SIGNAL VALUE MEETS THE DEVIANCE REQS. NOTE</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,647" id="srcline647">647</a></span><span class="line"><span class="comment">% THE THRESHOLD VALUE CHANGES BASED ON WHETHER DEVIANCE IS NEG OR POS</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,648" id="srcline648">648</a></span><span class="line"><span class="keyword">function</span> [<span class="var type1" id="S72T2U1042">meets_deviance_req</span>] = meets_deviance_threshold(<span class="var type1" id="S73T7U1045">hr_value</span>, <span class="var type1" id="S74T7U1046">signal_level</span>, <span class="var type1" id="S75T7U1047">pos_deviance_threshold</span>, <span class="var type1" id="S76T7U1048">neg_deviance_threshold</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="1,649" id="srcline649">649</a></span><span class="line">        <span class="mxinfo" id="T8:U6"><span class="var type1" id="S77T8U1051">Fixed_Point_Properties</span> = <span class="mxinfo" id="T8:U8">numerictype(<span class="string">'WordLength'</span>, 32, <span class="string">'FractionLength'</span>, 10, <span class="string">'Signed'</span>,false)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,650" id="srcline650">650</a></span><span class="line">        <span class="mxinfo" id="T9:U9"><span class="var type1" id="S80T9U1063">F</span> = <span class="mxinfo" id="T9:U11">fimath(<span class="string">'OverflowMode'</span>,<span class="string">'saturate'</span>, <span class="string">'RoundMode'</span>, <span class="string">'nearest'</span>, <span class="string">'ProductFractionLength'</span>, 20,<span class="string">'ProductMode'</span>, <span class="string">'SpecifyPrecision'</span>, <span class="string">'MaxProductWordLength'</span>, 32, <span class="string">'SumFractionLength'</span>, 10, <span class="string">'SumMode'</span>, <span class="string">'SpecifyPrecision'</span>,<span class="string">'MaxSumWordLength'</span>, 32)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,651" id="srcline651">651</a></span><span class="line">        <span class="comment">% asserts that the input parameters are of fixed point</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,652" id="srcline652">652</a></span><span class="line">        assert(isfi(<span class="var type1" id="S73T7U1087">hr_value</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="1,653" id="srcline653">653</a></span><span class="line">        assert(isfi(<span class="var type1" id="S74T7U1093">signal_level</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="1,654" id="srcline654">654</a></span><span class="line">        assert(isfi(<span class="var type1" id="S75T7U1099">pos_deviance_threshold</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="1,655" id="srcline655">655</a></span><span class="line">        assert(isfi(<span class="var type1" id="S76T7U1105">neg_deviance_threshold</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="1,656" id="srcline656">656</a></span><span class="line">        <span class="comment">% asserts that input parameters are of specific fixed point parameters</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,657" id="srcline657">657</a></span><span class="line">        assert(<span class="mxinfo" id="T6:U16">isequal(numerictype(<span class="var type1" id="S73T7U1114">hr_value</span>), <span class="var type1" id="S77T8U1115">Fixed_Point_Properties</span>) &amp;&amp; isequal(fimath(<span class="var type1" id="S73T7U1120">hr_value</span>), <span class="var type1" id="S80T9U1121">F</span>)</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,658" id="srcline658">658</a></span><span class="line">        assert(<span class="mxinfo" id="T6:U21">isequal(numerictype(<span class="var type1" id="S74T7U1130">signal_level</span>), <span class="var type1" id="S77T8U1131">Fixed_Point_Properties</span>) &amp;&amp; isequal(fimath(<span class="var type1" id="S74T7U1136">signal_level</span>), <span class="var type1" id="S80T9U1137">F</span>)</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,659" id="srcline659">659</a></span><span class="line">        assert(<span class="mxinfo" id="T6:U26">isequal(numerictype(<span class="var type1" id="S75T7U1146">pos_deviance_threshold</span>), <span class="var type1" id="S77T8U1147">Fixed_Point_Properties</span>) &amp;&amp; isequal(fimath(<span class="var type1" id="S75T7U1152">pos_deviance_threshold</span>), <span class="var type1" id="S80T9U1153">F</span>)</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,660" id="srcline660">660</a></span><span class="line">        assert(<span class="mxinfo" id="T6:U31">isequal(numerictype(<span class="var type1" id="S76T7U1162">neg_deviance_threshold</span>), <span class="var type1" id="S77T8U1163">Fixed_Point_Properties</span>) &amp;&amp; isequal(fimath(<span class="var type1" id="S76T7U1168">neg_deviance_threshold</span>), <span class="var type1" id="S80T9U1169">F</span>)</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,661" id="srcline661">661</a></span><span class="line">    <span class="comment">%Accounts for the first signal value</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,662" id="srcline662">662</a></span><span class="line">    <span class="keyword">if</span> (<span class="mxinfo" id="T6:U36"><span class="var type1" id="S74T7U1174">signal_level</span> == 0</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="1,663" id="srcline663">663</a></span><span class="line">        <span class="mxinfo" id="T2:U38"><span class="var type1" id="S72T2U1178">meets_deviance_req</span> = <span class="mxinfo" id="T2:U40">1</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,664" id="srcline664">664</a></span><span class="line">        <span class="keyword">return</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,665" id="srcline665">665</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,666" id="srcline666">666</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="1,667" id="srcline667">667</a></span><span class="line">    <span class="keyword">if</span> (<span class="mxinfo" id="T6:U41"><span class="var type1" id="S73T7U1185">hr_value</span> &lt; <span class="var type1" id="S74T7U1186">signal_level</span></span>)</span></span>
<span class="srcline"><span class="lineno"><a href="1,668" id="srcline668">668</a></span><span class="line">        <span class="mxinfo" id="T7:U44"><span class="var type1" id="S85T7U1189">deviance</span> = <span class="mxinfo" id="T7:U46">(<span class="mxinfo" id="T30:U47">(<span class="mxinfo" id="T7:U48"><span class="var type1" id="S74T7U1195">signal_level</span> - <span class="var type1" id="S73T7U1196">hr_value</span></span>) * 100</span>) / <span class="var type1" id="S74T7U1198">signal_level</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,669" id="srcline669">669</a></span><span class="line">        <span class="mxinfo" id="T2:U52"><span class="var type1" id="S86T2U1201">is_neg</span> = <span class="mxinfo" id="T2:U54">1</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,670" id="srcline670">670</a></span><span class="line">    <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,671" id="srcline671">671</a></span><span class="line">        <span class="mxinfo" id="T7:U55"><span class="var type1" id="S85T7U1206">deviance</span> = <span class="mxinfo" id="T7:U57">(<span class="mxinfo" id="T30:U58">(<span class="mxinfo" id="T7:U59"><span class="var type1" id="S73T7U1212">hr_value</span> - <span class="var type1" id="S74T7U1213">signal_level</span></span>) * 100</span>) / <span class="var type1" id="S74T7U1215">signal_level</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,672" id="srcline672">672</a></span><span class="line">        <span class="mxinfo" id="T2:U63"><span class="var type1" id="S86T2U1218">is_neg</span> = <span class="mxinfo" id="T2:U65">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,673" id="srcline673">673</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,674" id="srcline674">674</a></span><span class="line">    <span class="comment">% Checks value against NEG and POS deviance threshold</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,675" id="srcline675">675</a></span><span class="line">    <span class="keyword">if</span> (<span class="var type1" id="S86T2U1223">is_neg</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="1,676" id="srcline676">676</a></span><span class="line">        <span class="keyword">if</span> (<span class="mxinfo" id="T6:U67"><span class="var type1" id="S85T7U1228">deviance</span> &lt; <span class="mxinfo" id="T30:U69"><span class="var type1" id="S76T7U1230">neg_deviance_threshold</span> * 100</span></span>)</span></span>
<span class="srcline"><span class="lineno"><a href="1,677" id="srcline677">677</a></span><span class="line">            <span class="mxinfo" id="T2:U71"><span class="var type1" id="S72T2U1234">meets_deviance_req</span> = <span class="mxinfo" id="T2:U73">1</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,678" id="srcline678">678</a></span><span class="line">        <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,679" id="srcline679">679</a></span><span class="line">            <span class="mxinfo" id="T2:U74"><span class="var type1" id="S72T2U1239">meets_deviance_req</span> = <span class="mxinfo" id="T2:U76">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,680" id="srcline680">680</a></span><span class="line">        <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,681" id="srcline681">681</a></span><span class="line">    <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,682" id="srcline682">682</a></span><span class="line">        <span class="keyword">if</span> (<span class="mxinfo" id="T6:U77"><span class="var type1" id="S85T7U1246">deviance</span> &lt; <span class="mxinfo" id="T30:U79"><span class="var type1" id="S75T7U1248">pos_deviance_threshold</span> * 100</span></span>)</span></span>
<span class="srcline"><span class="lineno"><a href="1,683" id="srcline683">683</a></span><span class="line">            <span class="mxinfo" id="T2:U81"><span class="var type1" id="S72T2U1252">meets_deviance_req</span> = <span class="mxinfo" id="T2:U83">1</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,684" id="srcline684">684</a></span><span class="line">        <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,685" id="srcline685">685</a></span><span class="line">            <span class="mxinfo" id="T2:U84"><span class="var type1" id="S72T2U1257">meets_deviance_req</span> = <span class="mxinfo" id="T2:U86">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,686" id="srcline686">686</a></span><span class="line">        <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,687" id="srcline687">687</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,688" id="srcline688">688</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,689" id="srcline689">689</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,690" id="srcline690">690</a></span><span class="line"><span class="comment">%DUAL THRESHOLD PROCESSSING</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,691" id="srcline691">691</a></span><span class="line"><span class="comment">% Filters out R_peaks which don't meet the threshold reqs</span></span></span>
</pre>
