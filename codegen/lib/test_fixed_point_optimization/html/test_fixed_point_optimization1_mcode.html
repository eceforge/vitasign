<pre class="code">
<span class="srcline"><span class="lineno"><a href="1,1" id="srcline1"> 1</a></span><span class="line"><span class="comment">%#codegen</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,2" id="srcline2"> 2</a></span><span class="line"><span class="keyword">function</span> [ <span class="var type1" id="S2T18U3">result</span> ] = test_fixed_point_optimization()</span></span>
<span class="srcline"><span class="lineno"><a href="1,3" id="srcline3"> 3</a></span><span class="line"><span class="comment">%---- Tests dynamic changing of a fixed point radix --------</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,4" id="srcline4"> 4</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,5" id="srcline5"> 5</a></span><span class="line"><span class="mxinfo" id="T3:U2"><span class="var type1" id="S3T3U8">Fixed_Point_Properties_signed</span> = <span class="mxinfo" id="T3:U4">numerictype(<span class="string">'WordLength'</span>, 32, <span class="string">'FractionLength'</span>, 10, <span class="string">'Signed'</span>,true)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,6" id="srcline6"> 6</a></span><span class="line"><span class="mxinfo" id="T4:U5"><span class="var type1" id="S6T4U20">F_signed</span> = <span class="mxinfo" id="T4:U7">fimath(<span class="string">'OverflowMode'</span>,<span class="string">'saturate'</span>, <span class="string">'RoundMode'</span>, <span class="string">'nearest'</span>, <span class="string">'ProductFractionLength'</span>, 20,<span class="string">'ProductMode'</span>, <span class="string">'SpecifyPrecision'</span>, <span class="string">'MaxProductWordLength'</span>, 32, <span class="string">'SumFractionLength'</span>, 10, <span class="string">'SumMode'</span>, <span class="string">'SpecifyPrecision'</span>,<span class="string">'MaxSumWordLength'</span>, 32)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,7" id="srcline7"> 7</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,8" id="srcline8"> 8</a></span><span class="line"><span class="mxinfo" id="T5:U8"><span class="var type1" id="S8T5U41">num1</span> = <span class="mxinfo" id="T5:U10">fi(-3.535, <span class="var type1" id="S3T3U46">Fixed_Point_Properties_signed</span>, <span class="var type1" id="S6T4U47">F_signed</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,9" id="srcline9"> 9</a></span><span class="line"><span class="mxinfo" id="T5:U13"><span class="var type1" id="S10T5U50">num2</span> = <span class="mxinfo" id="T5:U15">fi(6.326, <span class="var type1" id="S3T3U54">Fixed_Point_Properties_signed</span>, <span class="var type1" id="S6T4U55">F_signed</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,10" id="srcline10">10</a></span><span class="line"><span class="comment">% result2 = fi(num1 + num2, Fixed_Point_Properties_signed, F_signed); </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,11" id="srcline11">11</a></span><span class="line"><span class="comment">% Result should be 22.36241</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,12" id="srcline12">12</a></span><span class="line"><span class="mxinfo" id="T18:U18"><span class="var type1" id="S2T18U58">result</span> = <span class="mxinfo" id="T18:U20"><span class="mxinfo" id="T5:U21"><span class="var type1" id="S8T5U60">num1</span></span> * <span class="mxinfo" id="T5:U23"><span class="var type1" id="S10T5U61">num2</span></span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,13" id="srcline13">13</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,14" id="srcline14">14</a></span><span class="line"></span></span>
</pre>
