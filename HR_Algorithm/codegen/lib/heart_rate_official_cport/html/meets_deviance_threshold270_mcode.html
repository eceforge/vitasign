<pre class="code">
<span class="srcline"><span class="lineno"><a href="1,698" id="srcline698">698</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,699" id="srcline699">699</a></span><span class="line"><span class="comment">% RETURNS TRUE IF THE INPUT SIGNAL VALUE MEETS THE DEVIANCE REQS. NOTE</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,700" id="srcline700">700</a></span><span class="line"><span class="comment">% THE THRESHOLD VALUE CHANGES BASED ON WHETHER DEVIANCE IS NEG OR POS</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,701" id="srcline701">701</a></span><span class="line"><span class="keyword">function</span> [<span class="var type1" id="S77T2U1167">meets_deviance_req</span>] = meets_deviance_threshold(<span class="var type1" id="S78T7U1170">hr_value</span>, <span class="var type1" id="S79T7U1171">signal_level</span>, <span class="var type1" id="S80T7U1172">pos_deviance_threshold</span>, <span class="var type1" id="S81T7U1173">neg_deviance_threshold</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="1,702" id="srcline702">702</a></span><span class="line">        <span class="mxinfo" id="T8:U6"><span class="var type1" id="S82T8U1176">Fixed_Point_Properties</span> = <span class="mxinfo" id="T8:U8">numerictype(<span class="string">'WordLength'</span>, 32, <span class="string">'FractionLength'</span>, 10, <span class="string">'Signed'</span>,false)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,703" id="srcline703">703</a></span><span class="line">        <span class="mxinfo" id="T9:U9"><span class="var type1" id="S85T9U1188">F</span> = <span class="mxinfo" id="T9:U11">fimath(<span class="string">'OverflowMode'</span>,<span class="string">'saturate'</span>, <span class="string">'RoundMode'</span>, <span class="string">'nearest'</span>, <span class="string">'ProductFractionLength'</span>, 20,<span class="string">'ProductMode'</span>, <span class="string">'SpecifyPrecision'</span>, <span class="string">'MaxProductWordLength'</span>, 32, <span class="string">'SumFractionLength'</span>, 10, <span class="string">'SumMode'</span>, <span class="string">'SpecifyPrecision'</span>,<span class="string">'MaxSumWordLength'</span>, 32)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,704" id="srcline704">704</a></span><span class="line">        <span class="comment">% asserts that the input parameters are of fixed point</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,705" id="srcline705">705</a></span><span class="line">        assert(isfi(<span class="var type1" id="S78T7U1212">hr_value</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="1,706" id="srcline706">706</a></span><span class="line">        assert(isfi(<span class="var type1" id="S79T7U1218">signal_level</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="1,707" id="srcline707">707</a></span><span class="line">        assert(isfi(<span class="var type1" id="S80T7U1224">pos_deviance_threshold</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="1,708" id="srcline708">708</a></span><span class="line">        assert(isfi(<span class="var type1" id="S81T7U1230">neg_deviance_threshold</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="1,709" id="srcline709">709</a></span><span class="line">        <span class="comment">% asserts that input parameters are of specific fixed point parameters</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,710" id="srcline710">710</a></span><span class="line">        assert(<span class="mxinfo" id="T6:U16">isequal(numerictype(<span class="var type1" id="S78T7U1239">hr_value</span>), <span class="var type1" id="S82T8U1240">Fixed_Point_Properties</span>) &amp;&amp; isequal(fimath(<span class="var type1" id="S78T7U1245">hr_value</span>), <span class="var type1" id="S85T9U1246">F</span>)</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,711" id="srcline711">711</a></span><span class="line">        assert(<span class="mxinfo" id="T6:U21">isequal(numerictype(<span class="var type1" id="S79T7U1255">signal_level</span>), <span class="var type1" id="S82T8U1256">Fixed_Point_Properties</span>) &amp;&amp; isequal(fimath(<span class="var type1" id="S79T7U1261">signal_level</span>), <span class="var type1" id="S85T9U1262">F</span>)</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,712" id="srcline712">712</a></span><span class="line">        assert(<span class="mxinfo" id="T6:U26">isequal(numerictype(<span class="var type1" id="S80T7U1271">pos_deviance_threshold</span>), <span class="var type1" id="S82T8U1272">Fixed_Point_Properties</span>) &amp;&amp; isequal(fimath(<span class="var type1" id="S80T7U1277">pos_deviance_threshold</span>), <span class="var type1" id="S85T9U1278">F</span>)</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,713" id="srcline713">713</a></span><span class="line">        assert(<span class="mxinfo" id="T6:U31">isequal(numerictype(<span class="var type1" id="S81T7U1287">neg_deviance_threshold</span>), <span class="var type1" id="S82T8U1288">Fixed_Point_Properties</span>) &amp;&amp; isequal(fimath(<span class="var type1" id="S81T7U1293">neg_deviance_threshold</span>), <span class="var type1" id="S85T9U1294">F</span>)</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,714" id="srcline714">714</a></span><span class="line">    <span class="comment">%Accounts for the first signal value</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,715" id="srcline715">715</a></span><span class="line">    <span class="keyword">if</span> (<span class="mxinfo" id="T6:U36"><span class="var type1" id="S79T7U1299">signal_level</span> == 0</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="1,716" id="srcline716">716</a></span><span class="line">        <span class="mxinfo" id="T2:U38"><span class="var type1" id="S77T2U1303">meets_deviance_req</span> = <span class="mxinfo" id="T2:U40">1</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,717" id="srcline717">717</a></span><span class="line">        <span class="keyword">return</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,718" id="srcline718">718</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,719" id="srcline719">719</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="1,720" id="srcline720">720</a></span><span class="line">    <span class="keyword">if</span> (<span class="mxinfo" id="T6:U41"><span class="var type1" id="S78T7U1310">hr_value</span> &lt; <span class="var type1" id="S79T7U1311">signal_level</span></span>)</span></span>
<span class="srcline"><span class="lineno"><a href="1,721" id="srcline721">721</a></span><span class="line">        <span class="mxinfo" id="T7:U44"><span class="var type1" id="S90T7U1314">deviance</span> = <span class="mxinfo" id="T7:U46">divide(<span class="var type1" id="S82T8U1317">Fixed_Point_Properties</span>, ((<span class="mxinfo" id="T7:U48"><span class="mxinfo" id="T44:U49"><span class="var type1" id="S79T7U1322">signal_level</span> * 100</span> - <span class="mxinfo" id="T44:U51"><span class="var type1" id="S78T7U1325">hr_value</span> * 100</span></span>)), <span class="var type1" id="S79T7U1327">signal_level</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,722" id="srcline722">722</a></span><span class="line">        <span class="mxinfo" id="T2:U54"><span class="var type1" id="S92T2U1330">is_neg</span> = <span class="mxinfo" id="T2:U56">1</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,723" id="srcline723">723</a></span><span class="line">    <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,724" id="srcline724">724</a></span><span class="line">        <span class="mxinfo" id="T7:U57"><span class="var type1" id="S90T7U1335">deviance</span> = <span class="mxinfo" id="T7:U59">divide(<span class="var type1" id="S82T8U1338">Fixed_Point_Properties</span>, ((<span class="mxinfo" id="T7:U61"><span class="mxinfo" id="T44:U62"><span class="var type1" id="S78T7U1343">hr_value</span> * 100</span> - <span class="mxinfo" id="T44:U64"><span class="var type1" id="S79T7U1346">signal_level</span> * 100</span></span>)), <span class="var type1" id="S79T7U1348">signal_level</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,725" id="srcline725">725</a></span><span class="line">        <span class="mxinfo" id="T2:U67"><span class="var type1" id="S92T2U1351">is_neg</span> = <span class="mxinfo" id="T2:U69">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,726" id="srcline726">726</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,727" id="srcline727">727</a></span><span class="line">    <span class="comment">% Checks value against NEG and POS deviance threshold</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,728" id="srcline728">728</a></span><span class="line">    <span class="keyword">if</span> (<span class="var type1" id="S92T2U1356">is_neg</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="1,729" id="srcline729">729</a></span><span class="line">        <span class="keyword">if</span> (<span class="mxinfo" id="T6:U71"><span class="var type1" id="S90T7U1361">deviance</span> &lt; <span class="mxinfo" id="T44:U73"><span class="var type1" id="S81T7U1363">neg_deviance_threshold</span> * 100</span></span>)</span></span>
<span class="srcline"><span class="lineno"><a href="1,730" id="srcline730">730</a></span><span class="line">            <span class="mxinfo" id="T2:U75"><span class="var type1" id="S77T2U1367">meets_deviance_req</span> = <span class="mxinfo" id="T2:U77">1</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,731" id="srcline731">731</a></span><span class="line">        <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,732" id="srcline732">732</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="1,733" id="srcline733">733</a></span><span class="line">            <span class="mxinfo" id="T2:U78"><span class="var type1" id="S77T2U1372">meets_deviance_req</span> = <span class="mxinfo" id="T2:U80">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,734" id="srcline734">734</a></span><span class="line">        <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,735" id="srcline735">735</a></span><span class="line">    <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,736" id="srcline736">736</a></span><span class="line">        <span class="keyword">if</span> (<span class="mxinfo" id="T6:U81"><span class="var type1" id="S90T7U1379">deviance</span> &lt; <span class="mxinfo" id="T44:U83"><span class="var type1" id="S80T7U1381">pos_deviance_threshold</span> * 100</span></span>)</span></span>
<span class="srcline"><span class="lineno"><a href="1,737" id="srcline737">737</a></span><span class="line">            <span class="mxinfo" id="T2:U85"><span class="var type1" id="S77T2U1385">meets_deviance_req</span> = <span class="mxinfo" id="T2:U87">1</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,738" id="srcline738">738</a></span><span class="line">        <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,739" id="srcline739">739</a></span><span class="line">            <span class="mxinfo" id="T2:U88"><span class="var type1" id="S77T2U1390">meets_deviance_req</span> = <span class="mxinfo" id="T2:U90">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,740" id="srcline740">740</a></span><span class="line">        <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,741" id="srcline741">741</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,742" id="srcline742">742</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,743" id="srcline743">743</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,744" id="srcline744">744</a></span><span class="line"><span class="comment">%DUAL THRESHOLD PROCESSSING</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,745" id="srcline745">745</a></span><span class="line"><span class="comment">% Filters out R_peaks which don't meet the threshold reqs</span></span></span>
</pre>
