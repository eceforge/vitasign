<pre class="code">
<span class="srcline"><span class="lineno"><a href="1,1" id="srcline1"> 1</a></span><span class="line"><span class="comment">%#codegen</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,2" id="srcline2"> 2</a></span><span class="line"><span class="keyword">function</span> [ <span class="var type1" id="S2T18U3">result</span> ] = test_fixed_point_optimization(<span class="var type1" id="S3T3U6">num1</span>, <span class="var type1" id="S4T3U7">num2</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="1,3" id="srcline3"> 3</a></span><span class="line"><span class="comment">%---- Tests dynamic changing of a fixed point radix --------</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,4" id="srcline4"> 4</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,5" id="srcline5"> 5</a></span><span class="line"><span class="mxinfo" id="T4:U4"><span class="var type1" id="S5T4U10">Fixed_Point_Properties_signed</span> = <span class="mxinfo" id="T4:U6">numerictype(<span class="string">'WordLength'</span>, 32, <span class="string">'FractionLength'</span>, 10, <span class="string">'Signed'</span>,true)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,6" id="srcline6"> 6</a></span><span class="line"><span class="mxinfo" id="T6:U7"><span class="var type1" id="S8T6U22">F_signed</span> = <span class="mxinfo" id="T6:U9">fimath(<span class="string">'OverflowMode'</span>,<span class="string">'saturate'</span>, <span class="string">'RoundMode'</span>, <span class="string">'nearest'</span>, <span class="string">'ProductFractionLength'</span>, 20,<span class="string">'ProductMode'</span>, <span class="string">'SpecifyPrecision'</span>, <span class="string">'MaxProductWordLength'</span>, 32, <span class="string">'SumFractionLength'</span>, 10, <span class="string">'SumMode'</span>, <span class="string">'SpecifyPrecision'</span>,<span class="string">'MaxSumWordLength'</span>, 32)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,7" id="srcline7"> 7</a></span><span class="line">assert(isfi(<span class="var type1" id="S3T3U46">num1</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="1,8" id="srcline8"> 8</a></span><span class="line">assert(isfi(<span class="var type1" id="S4T3U52">num2</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="1,9" id="srcline9"> 9</a></span><span class="line">assert(<span class="mxinfo" id="T5:U12">isequal(numerictype(<span class="var type1" id="S3T3U61">num1</span>), <span class="var type1" id="S5T4U62">Fixed_Point_Properties_signed</span>) &amp;&amp; isequal(fimath(<span class="var type1" id="S3T3U67">num1</span>), <span class="var type1" id="S8T6U68">F_signed</span>)</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,10" id="srcline10">10</a></span><span class="line">assert(<span class="mxinfo" id="T5:U17">isequal(numerictype(<span class="var type1" id="S4T3U77">num2</span>), <span class="var type1" id="S5T4U78">Fixed_Point_Properties_signed</span>) &amp;&amp; isequal(fimath(<span class="var type1" id="S4T3U83">num2</span>), <span class="var type1" id="S8T6U84">F_signed</span>)</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,11" id="srcline11">11</a></span><span class="line"><span class="mxinfo" id="T3:U22"><span class="var type1" id="S3T3U87">num1</span> = fi(<span class="var type1" id="S3T3U90">num1</span>, <span class="var type1" id="S5T4U91">Fixed_Point_Properties_signed</span>, <span class="var type1" id="S8T6U92">F_signed</span>)</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,12" id="srcline12">12</a></span><span class="line"><span class="mxinfo" id="T3:U27"><span class="var type1" id="S4T3U95">num2</span> = fi(<span class="var type1" id="S4T3U98">num2</span>, <span class="var type1" id="S5T4U99">Fixed_Point_Properties_signed</span>, <span class="var type1" id="S8T6U100">F_signed</span>)</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,13" id="srcline13">13</a></span><span class="line"><span class="comment">% result2 = fi(num1 + num2, Fixed_Point_Properties_signed, F_signed); </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,14" id="srcline14">14</a></span><span class="line"><span class="comment">% Result should be 22.36241</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,15" id="srcline15">15</a></span><span class="line"><span class="mxinfo" id="T18:U32"><span class="var type1" id="S2T18U103">result</span> = <span class="mxinfo" id="T18:U34"><span class="var type1" id="S3T3U105">num1</span> * <span class="var type1" id="S4T3U106">num2</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,16" id="srcline16">16</a></span><span class="line"><span class="comment">% result = fi(num1 * num2, Fixed_Point_Properties_signed, F_signed);</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,17" id="srcline17">17</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,18" id="srcline18">18</a></span><span class="line"></span></span>
</pre>
